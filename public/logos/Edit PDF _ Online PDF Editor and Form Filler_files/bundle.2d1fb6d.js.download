var Ue=Object.defineProperty,ke=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var Y=(a,t,e)=>t in a?Ue(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,I=(a,t)=>{for(var e in t||(t={}))Ge.call(t,e)&&Y(a,e,t[e]);if(ie)for(var e of ie(t))He.call(t,e)&&Y(a,e,t[e]);return a},q=(a,t)=>ke(a,Fe(t));var r=(a,t,e)=>Y(a,typeof t!="symbol"?t+"":t,e);var V=(a,t,e)=>new Promise((s,i)=>{var n=p=>{try{d(e.next(p))}catch(m){i(m)}},l=p=>{try{d(e.throw(p))}catch(m){i(m)}},d=p=>p.done?s(p.value):Promise.resolve(p.value).then(n,l);d((e=e.apply(a,t)).next())});class N extends Error{constructor(t){super(t),this.name="DecodingError"}}class P extends Error{constructor(t){super(t),this.name="EncodingError"}}class k extends Error{constructor(t){super(t),this.name="GVLError"}}class O extends Error{constructor(t,e,s=""){super(`invalid value ${e} passed for ${t} ${s}`),this.name="TCModelError"}}class D{static encode(t){if(!/^[0-1]+$/.test(t))throw new P("Invalid bitField");const e=t.length%this.LCM;t+=e?"0".repeat(this.LCM-e):"";let s="";for(let i=0;i<t.length;i+=this.BASIS)s+=this.DICT[parseInt(t.substr(i,this.BASIS),2)];return s}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new N("Invalidly encoded Base64URL string");let e="";for(let s=0;s<t.length;s++){const i=this.REVERSE_DICT.get(t[s]).toString(2);e+="0".repeat(this.BASIS-i.length)+i}return e}}r(D,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),r(D,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]])),r(D,"BASIS",6),r(D,"LCM",24);const _=class _{has(t){return _.langSet.has(t)}parseLanguage(t){const e=(t=t.toUpperCase()).split("-")[0];if(t.length>=2&&e.length==2){if(_.langSet.has(t))return t;if(_.langSet.has(e))return e;const s=e+"-"+e;if(_.langSet.has(s))return s;for(const i of _.langSet)if(i.indexOf(t)!==-1||i.indexOf(e)!==-1)return i}throw new Error(`unsupported language ${t}`)}forEach(t){_.langSet.forEach(t)}get size(){return _.langSet.size}};r(_,"langSet",new Set(["AR","BG","BS","CA","CS","CY","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HE","HR","HU","ID","IT","JA","KO","LT","LV","MK","MS","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SR-LATN","SR-CYRL","SV","TL","TR","UK","ZH"]));let Z=_;class o{}r(o,"cmpId","cmpId"),r(o,"cmpVersion","cmpVersion"),r(o,"consentLanguage","consentLanguage"),r(o,"consentScreen","consentScreen"),r(o,"created","created"),r(o,"supportOOB","supportOOB"),r(o,"isServiceSpecific","isServiceSpecific"),r(o,"lastUpdated","lastUpdated"),r(o,"numCustomPurposes","numCustomPurposes"),r(o,"policyVersion","policyVersion"),r(o,"publisherCountryCode","publisherCountryCode"),r(o,"publisherCustomConsents","publisherCustomConsents"),r(o,"publisherCustomLegitimateInterests","publisherCustomLegitimateInterests"),r(o,"publisherLegitimateInterests","publisherLegitimateInterests"),r(o,"publisherConsents","publisherConsents"),r(o,"publisherRestrictions","publisherRestrictions"),r(o,"purposeConsents","purposeConsents"),r(o,"purposeLegitimateInterests","purposeLegitimateInterests"),r(o,"purposeOneTreatment","purposeOneTreatment"),r(o,"specialFeatureOptins","specialFeatureOptins"),r(o,"useNonStandardTexts","useNonStandardTexts"),r(o,"vendorConsents","vendorConsents"),r(o,"vendorLegitimateInterests","vendorLegitimateInterests"),r(o,"vendorListVersion","vendorListVersion"),r(o,"vendorsAllowed","vendorsAllowed"),r(o,"vendorsDisclosed","vendorsDisclosed"),r(o,"version","version");class ${clone(){const t=new this.constructor;return Object.keys(this).forEach(e=>{const s=this.deepClone(this[e]);s!==void 0&&(t[e]=s)}),t}deepClone(t){const e=typeof t;if(e==="number"||e==="string"||e==="boolean")return t;if(t!==null&&e==="object"){if(typeof t.clone=="function")return t.clone();if(t instanceof Date)return new Date(t.getTime());if(t[Symbol.iterator]!==void 0){const s=[];for(const i of t)s.push(this.deepClone(i));return t instanceof Array?s:new t.constructor(s)}{const s={};for(const i in t)t.hasOwnProperty(i)&&(s[i]=this.deepClone(t[i]));return s}}}}var w,re,v,G,S,U,x,H;(function(a){a[a.NOT_ALLOWED=0]="NOT_ALLOWED",a[a.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",a[a.REQUIRE_LI=2]="REQUIRE_LI"})(w||(w={}));const j=class j extends ${constructor(e,s){super();r(this,"purposeId_");r(this,"restrictionType");e!==void 0&&(this.purposeId=e),s!==void 0&&(this.restrictionType=s)}static unHash(e){const s=e.split(this.hashSeparator),i=new j;if(s.length!==2)throw new O("hash",e);return i.purposeId=parseInt(s[0],10),i.restrictionType=parseInt(s[1],10),i}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${j.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===w.NOT_ALLOWED||this.restrictionType===w.REQUIRE_CONSENT||this.restrictionType===w.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}};r(j,"hashSeparator","-");let M=j;class Ne extends ${constructor(){super(...arguments);r(this,"bitLength",0);r(this,"map",new Map);r(this,"gvl_")}has(e){return this.map.has(e)}isOkToHave(e,s,i){var l;let n=!0;if((l=this.gvl)!=null&&l.vendors){const d=this.gvl.vendors[i];if(d)if(e===w.NOT_ALLOWED)n=d.legIntPurposes.includes(s)||d.purposes.includes(s);else if(d.flexiblePurposes.length)switch(e){case w.REQUIRE_CONSENT:n=d.flexiblePurposes.includes(s)&&d.legIntPurposes.includes(s);break;case w.REQUIRE_LI:n=d.flexiblePurposes.includes(s)&&d.purposes.includes(s)}else n=!1;else n=!1}return n}add(e,s){if(this.isOkToHave(s.restrictionType,s.purposeId,e)){const i=s.hash;this.has(i)||(this.map.set(i,new Set),this.bitLength=0),this.map.get(i).add(e)}}restrictPurposeToLegalBasis(e){const s=Array.from(this.gvl.vendorIds),i=e.hash,n=s[s.length-1],l=[...Array(n).keys()].map(d=>d+1);if(this.has(i))for(let d=1;d<=n;d++)this.map.get(i).add(d);else this.map.set(i,new Set(l)),this.bitLength=0}getVendors(e){let s=[];if(e){const i=e.hash;this.has(i)&&(s=Array.from(this.map.get(i)))}else{const i=new Set;this.map.forEach(n=>{n.forEach(l=>{i.add(l)})}),s=Array.from(i)}return s.sort((i,n)=>i-n)}getRestrictionType(e,s){let i;return this.getRestrictions(e).forEach(n=>{n.purposeId===s&&(i===void 0||i>n.restrictionType)&&(i=n.restrictionType)}),i}vendorHasRestriction(e,s){let i=!1;const n=this.getRestrictions(e);for(let l=0;l<n.length&&!i;l++)i=s.isSameAs(n[l]);return i}getMaxVendorId(){let e=0;return this.map.forEach(s=>{e=Math.max(Array.from(s)[s.size-1],e)}),e}getRestrictions(e){const s=[];return this.map.forEach((i,n)=>{e?i.has(e)&&s.push(M.unHash(n)):s.push(M.unHash(n))}),s}getPurposes(){const e=new Set;return this.map.forEach((s,i)=>{e.add(M.unHash(i).purposeId)}),Array.from(e)}remove(e,s){const i=s.hash,n=this.map.get(i);n&&(n.delete(e),n.size==0&&(this.map.delete(i),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach((s,i)=>{const n=M.unHash(i);Array.from(s).forEach(l=>{this.isOkToHave(n.restrictionType,n.purposeId,l)||s.delete(l)})}))}get gvl(){return this.gvl_}isEmpty(){return this.map.size===0}get numRestrictions(){return this.map.size}}(function(a){a.COOKIE="cookie",a.WEB="web",a.APP="app"})(re||(re={})),function(a){a.CORE="core",a.VENDORS_DISCLOSED="vendorsDisclosed",a.VENDORS_ALLOWED="vendorsAllowed",a.PUBLISHER_TC="publisherTC"}(v||(v={}));class Q{}r(Q,"ID_TO_KEY",[v.CORE,v.VENDORS_DISCLOSED,v.VENDORS_ALLOWED,v.PUBLISHER_TC]),r(Q,"KEY_TO_ID",{[v.CORE]:0,[v.VENDORS_DISCLOSED]:1,[v.VENDORS_ALLOWED]:2,[v.PUBLISHER_TC]:3});class b extends ${constructor(){super(...arguments);r(this,"bitLength",0);r(this,"maxId_",0);r(this,"set_",new Set)}*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach(s=>this.unset(s)):typeof e=="object"?this.unset(Object.keys(e).map(s=>Number(s))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(s=>{this.maxId_=Math.max(this.maxId,s)})))}isIntMap(e){let s=typeof e=="object";return s=s&&Object.keys(e).every(i=>{let n=Number.isInteger(parseInt(i,10));return n=n&&this.isValidNumber(e[i].id),n=n&&e[i].name!==void 0,n}),s}isValidNumber(e){return parseInt(e,10)>0}isSet(e){let s=!1;return e instanceof Set&&(s=Array.from(e).every(this.isValidNumber)),s}set(e){if(Array.isArray(e))e.forEach(s=>this.set(s));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(s=>Number(s)));else{if(!this.isValidNumber(e))throw new O("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}}empty(){this.set_=new Set}forEach(e){for(let s=1;s<=this.maxId;s++)e(this.has(s),s)}get size(){return this.set_.size}setAll(e){this.set(e)}}var le,de,ue,pe,he,ge,me,fe,ve,Ie,Ce,Ee,Se,be,ye,Ae,_e,we;we=o.cmpId,_e=o.cmpVersion,Ae=o.consentLanguage,ye=o.consentScreen,be=o.created,Se=o.isServiceSpecific,Ee=o.lastUpdated,Ce=o.policyVersion,Ie=o.publisherCountryCode,ve=o.publisherLegitimateInterests,fe=o.publisherConsents,me=o.purposeConsents,ge=o.purposeLegitimateInterests,he=o.purposeOneTreatment,pe=o.specialFeatureOptins,ue=o.useNonStandardTexts,de=o.vendorListVersion,le=o.version;class c{}r(c,we,12),r(c,_e,12),r(c,Ae,12),r(c,ye,6),r(c,be,36),r(c,Se,1),r(c,Ee,36),r(c,Ce,6),r(c,Ie,12),r(c,ve,24),r(c,fe,24),r(c,me,24),r(c,ge,24),r(c,he,1),r(c,pe,12),r(c,ue,1),r(c,de,12),r(c,le,6),r(c,"anyBoolean",1),r(c,"encodingType",1),r(c,"maxId",16),r(c,"numCustomPurposes",6),r(c,"numEntries",12),r(c,"numRestrictions",12),r(c,"purposeId",6),r(c,"restrictionType",2),r(c,"segmentType",3),r(c,"singleOrRange",1),r(c,"vendorId",16);class L{static encode(t){return String(Number(t))}static decode(t){return t==="1"}}class g{static encode(t,e){let s;if(typeof t=="string"&&(t=parseInt(t,10)),s=t.toString(2),s.length>e||t<0)throw new P(`${t} too large to encode into ${e}`);return s.length<e&&(s="0".repeat(e-s.length)+s),s}static decode(t,e){if(e!==t.length)throw new N("invalid bit length");return parseInt(t,2)}}class ne{static encode(t,e){return g.encode(Math.round(t.getTime()/100),e)}static decode(t,e){if(e!==t.length)throw new N("invalid bit length");const s=new Date;return s.setTime(100*g.decode(t,e)),s}}class R{static encode(t,e){let s="";for(let i=1;i<=e;i++)s+=L.encode(t.has(i));return s}static decode(t,e){if(t.length!==e)throw new N("bitfield encoding length mismatch");const s=new b;for(let i=1;i<=e;i++)L.decode(t[i-1])&&s.set(i);return s.bitLength=t.length,s}}class oe{static encode(t,e){const s=(t=t.toUpperCase()).charCodeAt(0)-65,i=t.charCodeAt(1)-65;if(s<0||s>25||i<0||i>25)throw new P(`invalid language code: ${t}`);if(e%2==1)throw new P(`numBits must be even, ${e} is not valid`);return e/=2,g.encode(s,e)+g.encode(i,e)}static decode(t,e){let s;if(e!==t.length||t.length%2)throw new N("invalid bit length for language");{const n=t.length/2,l=g.decode(t.slice(0,n),n)+65,d=g.decode(t.slice(n),n)+65;s=String.fromCharCode(l)+String.fromCharCode(d)}return s}}class je{static encode(t){let e=g.encode(t.numRestrictions,c.numRestrictions);if(!t.isEmpty()){const s=(i,n)=>{for(let l=i+1;l<=n;l++)if(t.gvl.vendorIds.has(l))return l;return i};t.getRestrictions().forEach(i=>{e+=g.encode(i.purposeId,c.purposeId),e+=g.encode(i.restrictionType,c.restrictionType);const n=t.getVendors(i),l=n.length;let d=0,p=0,m="";for(let f=0;f<l;f++){const C=n[f];if(p===0&&(d++,p=C),f===l-1||n[f+1]>s(C,n[l-1])){const E=C!==p;m+=L.encode(E),m+=g.encode(p,c.vendorId),E&&(m+=g.encode(C,c.vendorId)),p=0}}e+=g.encode(d,c.numEntries),e+=m})}return e}static decode(t){let e=0;const s=new Ne,i=g.decode(t.substr(e,c.numRestrictions),c.numRestrictions);e+=c.numRestrictions;for(let n=0;n<i;n++){const l=g.decode(t.substr(e,c.purposeId),c.purposeId);e+=c.purposeId;const d=g.decode(t.substr(e,c.restrictionType),c.restrictionType);e+=c.restrictionType;const p=new M(l,d),m=g.decode(t.substr(e,c.numEntries),c.numEntries);e+=c.numEntries;for(let f=0;f<m;f++){const C=L.decode(t.substr(e,c.anyBoolean));e+=c.anyBoolean;const E=g.decode(t.substr(e,c.vendorId),c.vendorId);if(e+=c.vendorId,C){const J=g.decode(t.substr(e,c.vendorId),c.vendorId);if(e+=c.vendorId,J<E)throw new N(`Invalid RangeEntry: endVendorId ${J} is less than ${E}`);for(let K=E;K<=J;K++)s.add(K,p)}else s.add(E,p)}}return s.bitLength=e,s}}(function(a){a[a.FIELD=0]="FIELD",a[a.RANGE=1]="RANGE"})(G||(G={}));class F{static encode(t){const e=[];let s,i=[],n=g.encode(t.maxId,c.maxId),l="";const d=c.maxId+c.encodingType,p=d+t.maxId,m=2*c.vendorId+c.singleOrRange+c.numEntries;let f=d+c.numEntries;return t.forEach((C,E)=>{l+=L.encode(C),s=t.maxId>m&&f<p,s&&C&&(t.has(E+1)?i.length===0&&(i.push(E),f+=c.singleOrRange,f+=c.vendorId):(i.push(E),f+=c.vendorId,e.push(i),i=[]))}),s?(n+=String(G.RANGE),n+=this.buildRangeEncoding(e)):(n+=String(G.FIELD),n+=l),n}static decode(t,e){let s,i=0;const n=g.decode(t.substr(i,c.maxId),c.maxId);i+=c.maxId;const l=g.decode(t.charAt(i),c.encodingType);if(i+=c.encodingType,l===G.RANGE){if(s=new b,e===1){if(t.substr(i,1)==="1")throw new N("Unable to decode default consent=1");i++}const d=g.decode(t.substr(i,c.numEntries),c.numEntries);i+=c.numEntries;for(let p=0;p<d;p++){const m=L.decode(t.charAt(i));i+=c.singleOrRange;const f=g.decode(t.substr(i,c.vendorId),c.vendorId);if(i+=c.vendorId,m){const C=g.decode(t.substr(i,c.vendorId),c.vendorId);i+=c.vendorId;for(let E=f;E<=C;E++)s.set(E)}else s.set(f)}}else{const d=t.substr(i,n);i+=n,s=R.decode(d,n)}return s.bitLength=i,s}static buildRangeEncoding(t){const e=t.length;let s=g.encode(e,c.numEntries);return t.forEach(i=>{const n=i.length===1;s+=L.encode(!n),s+=g.encode(i[0],c.vendorId),n||(s+=g.encode(i[1],c.vendorId))}),s}}function ae(){return{[o.version]:g,[o.created]:ne,[o.lastUpdated]:ne,[o.cmpId]:g,[o.cmpVersion]:g,[o.consentScreen]:g,[o.consentLanguage]:oe,[o.vendorListVersion]:g,[o.policyVersion]:g,[o.isServiceSpecific]:L,[o.useNonStandardTexts]:L,[o.specialFeatureOptins]:R,[o.purposeConsents]:R,[o.purposeLegitimateInterests]:R,[o.purposeOneTreatment]:L,[o.publisherCountryCode]:oe,[o.vendorConsents]:F,[o.vendorLegitimateInterests]:F,[o.publisherRestrictions]:je,segmentType:g,[o.vendorsDisclosed]:F,[o.vendorsAllowed]:F,[o.publisherConsents]:R,[o.publisherLegitimateInterests]:R,[o.numCustomPurposes]:g,[o.publisherCustomConsents]:R,[o.publisherCustomLegitimateInterests]:R}}class $e{constructor(){r(this,1,{[v.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.purposeConsents,o.vendorConsents]});r(this,2,{[v.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.policyVersion,o.isServiceSpecific,o.useNonStandardTexts,o.specialFeatureOptins,o.purposeConsents,o.purposeLegitimateInterests,o.purposeOneTreatment,o.publisherCountryCode,o.vendorConsents,o.vendorLegitimateInterests,o.publisherRestrictions],[v.PUBLISHER_TC]:[o.publisherConsents,o.publisherLegitimateInterests,o.numCustomPurposes,o.publisherCustomConsents,o.publisherCustomLegitimateInterests],[v.VENDORS_ALLOWED]:[o.vendorsAllowed],[v.VENDORS_DISCLOSED]:[o.vendorsDisclosed]})}}class Qe{constructor(t,e){r(this,1,[v.CORE]);r(this,2,[v.CORE]);if(t.version===2)if(t.isServiceSpecific)this[2].push(v.PUBLISHER_TC);else{const s=!(!e||!e.isForVendors);s&&t[o.supportOOB]!==!0||this[2].push(v.VENDORS_DISCLOSED),s&&(t[o.supportOOB]&&t[o.vendorsAllowed].size>0&&this[2].push(v.VENDORS_ALLOWED),this[2].push(v.PUBLISHER_TC))}}}class ee{static encode(t,e){let s;try{s=this.fieldSequence[String(t.version)][e]}catch(l){throw new P(`Unable to encode version: ${t.version}, segment: ${e}`)}let i="";e!==v.CORE&&(i=g.encode(Q.KEY_TO_ID[e],c.segmentType));const n=ae();return s.forEach(l=>{const d=t[l],p=n[l];let m=c[l];m===void 0&&this.isPublisherCustom(l)&&(m=Number(t[o.numCustomPurposes]));try{i+=p.encode(d,m)}catch(f){throw new P(`Error encoding ${e}->${l}: ${f.message}`)}}),D.encode(i)}static decode(t,e,s){const i=D.decode(t);let n=0;s===v.CORE&&(e.version=g.decode(i.substr(n,c[o.version]),c[o.version])),s!==v.CORE&&(n+=c.segmentType);const l=this.fieldSequence[String(e.version)][s],d=ae();return l.forEach(p=>{const m=d[p];let f=c[p];if(f===void 0&&this.isPublisherCustom(p)&&(f=Number(e[o.numCustomPurposes])),f!==0){const C=i.substr(n,f);if(e[p]=m===F?m.decode(C,e.version):m.decode(C,f),Number.isInteger(f))n+=f;else{if(!Number.isInteger(e[p].bitLength))throw new N(p);n+=e[p].bitLength}}}),e}static isPublisherCustom(t){return t.indexOf("publisherCustom")===0}}r(ee,"fieldSequence",new $e);class De{static process(t,e){const s=t.gvl;if(!s)throw new P("Unable to encode TCModel without a GVL");if(!s.isReady)throw new P("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=s.language.slice(0,2).toUpperCase(),(e==null?void 0:e.version)>0&&(e==null?void 0:e.version)<=this.processor.length?t.version=e.version:t.version=this.processor.length;const i=t.version-1;if(!this.processor[i])throw new P(`Invalid version: ${t.version}`);return this.processor[i](t,s)}}r(De,"processor",[t=>t,(t,e)=>{t.publisherRestrictions.gvl=e,t.purposeLegitimateInterests.unset([1,3,4,5,6]);const s=new Map;return s.set("legIntPurposes",t.vendorLegitimateInterests),s.set("purposes",t.vendorConsents),s.forEach((i,n)=>{i.forEach((l,d)=>{if(l){const p=e.vendors[d];if(!p||p.deletedDate)i.unset(d);else if(p[n].length===0&&!(n==="legIntPurposes"&&p.purposes.length===0&&p.legIntPurposes.length===0&&p.specialPurposes.length>0))if(t.isServiceSpecific)if(p.flexiblePurposes.length===0)i.unset(d);else{const m=t.publisherRestrictions.getRestrictions(d);let f=!1;for(let C=0,E=m.length;C<E&&!f;C++)f=m[C].restrictionType===w.REQUIRE_CONSENT&&n==="purposes"||m[C].restrictionType===w.REQUIRE_LI&&n==="legIntPurposes";f||i.unset(d)}else i.unset(d)}})}),t.vendorsDisclosed.set(e.vendors),t}]);class We{static absCall(t,e,s,i){return new Promise((n,l)=>{const d=new XMLHttpRequest;d.withCredentials=s,d.addEventListener("load",()=>{if(d.readyState==XMLHttpRequest.DONE)if(d.status>=200&&d.status<300){let p=d.response;if(typeof p=="string")try{p=JSON.parse(p)}catch(m){}n(p)}else l(new Error(`HTTP Status: ${d.status} response type: ${d.responseType}`))}),d.addEventListener("error",()=>{l(new Error("error"))}),d.addEventListener("abort",()=>{l(new Error("aborted"))}),e===null?d.open("GET",t,!0):d.open("POST",t,!0),d.responseType="json",d.timeout=i,d.ontimeout=()=>{l(new Error("Timeout "+i+"ms "+t))},d.send(e)})}static post(t,e,s=!1,i=0){return this.absCall(t,JSON.stringify(e),s,i)}static fetch(t,e=!1,s=0){return this.absCall(t,null,e,s)}}const h=class h extends ${constructor(e){super();r(this,"readyPromise");r(this,"gvlSpecificationVersion");r(this,"vendorListVersion");r(this,"tcfPolicyVersion");r(this,"lastUpdated");r(this,"purposes");r(this,"specialPurposes");r(this,"features");r(this,"specialFeatures");r(this,"isReady_",!1);r(this,"vendors_");r(this,"vendorIds");r(this,"fullVendorList");r(this,"byPurposeVendorMap");r(this,"bySpecialPurposeVendorMap");r(this,"byFeatureVendorMap");r(this,"bySpecialFeatureVendorMap");r(this,"stacks");r(this,"dataCategories");r(this,"lang_");r(this,"cacheLang_");r(this,"isLatest",!1);let s=h.baseUrl;if(this.lang_=h.DEFAULT_LANGUAGE,this.cacheLang_=h.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!s)throw new k("must specify GVL.baseUrl before loading GVL json");if(e>0){const i=e;h.CACHE.has(i)?(this.populate(h.CACHE.get(i)),this.readyPromise=Promise.resolve()):(s+=h.versionedFilename.replace("[VERSION]",String(i)),this.readyPromise=this.fetchJson(s))}else h.CACHE.has(h.LATEST_CACHE_KEY)?(this.populate(h.CACHE.get(h.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(s+h.latestFilename))}}static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new k("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&e[e.length-1]!=="/"&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static emptyLanguageCache(e){let s=!1;return e==null&&h.LANGUAGE_CACHE.size>0?(h.LANGUAGE_CACHE=new Map,s=!0):typeof e=="string"&&this.consentLanguages.has(e.toUpperCase())&&(h.LANGUAGE_CACHE.delete(e.toUpperCase()),s=!0),s}static emptyCache(e){let s=!1;return Number.isInteger(e)&&e>=0?(h.CACHE.delete(e),s=!0):e===void 0&&(h.CACHE=new Map,s=!0),s}cacheLanguage(){h.LANGUAGE_CACHE.has(this.cacheLang_)||h.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}fetchJson(e){return V(this,null,function*(){try{this.populate(yield We.fetch(e))}catch(s){throw new k(s.message)}})}getJson(){return q(I({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.clonePurposes(),specialPurposes:this.cloneSpecialPurposes(),features:this.cloneFeatures(),specialFeatures:this.cloneSpecialFeatures(),stacks:this.cloneStacks()},this.dataCategories?{dataCategories:this.cloneDataCategories()}:{}),{vendors:this.cloneVendors()})}cloneSpecialFeatures(){const e={};for(const s of Object.keys(this.specialFeatures))e[s]=h.cloneFeature(this.specialFeatures[s]);return e}cloneFeatures(){const e={};for(const s of Object.keys(this.features))e[s]=h.cloneFeature(this.features[s]);return e}cloneStacks(){const e={};for(const s of Object.keys(this.stacks))e[s]=h.cloneStack(this.stacks[s]);return e}cloneDataCategories(){const e={};for(const s of Object.keys(this.dataCategories))e[s]=h.cloneDataCategory(this.dataCategories[s]);return e}cloneSpecialPurposes(){const e={};for(const s of Object.keys(this.specialPurposes))e[s]=h.clonePurpose(this.specialPurposes[s]);return e}clonePurposes(){const e={};for(const s of Object.keys(this.purposes))e[s]=h.clonePurpose(this.purposes[s]);return e}static clonePurpose(e){return I(I({id:e.id,name:e.name,description:e.description},e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{}),e.illustrations?{illustrations:Array.from(e.illustrations)}:{})}static cloneFeature(e){return I(I({id:e.id,name:e.name,description:e.description},e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{}),e.illustrations?{illustrations:Array.from(e.illustrations)}:{})}static cloneDataCategory(e){return{id:e.id,name:e.name,description:e.description}}static cloneStack(e){return{id:e.id,name:e.name,description:e.description,purposes:Array.from(e.purposes),specialFeatures:Array.from(e.specialFeatures)}}static cloneDataRetention(e){return q(I({},typeof e.stdRetention=="number"?{stdRetention:e.stdRetention}:{}),{purposes:I({},e.purposes),specialPurposes:I({},e.specialPurposes)})}static cloneVendorUrls(e){return e.map(s=>I({langId:s.langId,privacy:s.privacy},s.legIntClaim?{legIntClaim:s.legIntClaim}:{}))}static cloneVendor(e){return I(I(I(I(I(I(I(I(I(I(I({id:e.id,name:e.name,purposes:Array.from(e.purposes),legIntPurposes:Array.from(e.legIntPurposes),flexiblePurposes:Array.from(e.flexiblePurposes),specialPurposes:Array.from(e.specialPurposes),features:Array.from(e.features),specialFeatures:Array.from(e.specialFeatures)},e.overflow?{overflow:{httpGetLimit:e.overflow.httpGetLimit}}:{}),typeof e.cookieMaxAgeSeconds=="number"||e.cookieMaxAgeSeconds===null?{cookieMaxAgeSeconds:e.cookieMaxAgeSeconds}:{}),e.usesCookies!==void 0?{usesCookies:e.usesCookies}:{}),e.policyUrl?{policyUrl:e.policyUrl}:{}),e.cookieRefresh!==void 0?{cookieRefresh:e.cookieRefresh}:{}),e.usesNonCookieAccess!==void 0?{usesNonCookieAccess:e.usesNonCookieAccess}:{}),e.dataRetention?{dataRetention:this.cloneDataRetention(e.dataRetention)}:{}),e.urls?{urls:this.cloneVendorUrls(e.urls)}:{}),e.dataDeclaration?{dataDeclaration:Array.from(e.dataDeclaration)}:{}),e.deviceStorageDisclosureUrl?{deviceStorageDisclosureUrl:e.deviceStorageDisclosureUrl}:{}),e.deletedDate?{deletedDate:e.deletedDate}:{})}cloneVendors(){const e={};for(const s of Object.keys(this.fullVendorList))e[s]=h.cloneVendor(this.fullVendorList[s]);return e}changeLanguage(e){return V(this,null,function*(){let s=e;try{s=h.consentLanguages.parseLanguage(e)}catch(n){throw new k("Error during parsing the language: "+n.message)}const i=e.toUpperCase();if((s.toLowerCase()!==h.DEFAULT_LANGUAGE.toLowerCase()||h.LANGUAGE_CACHE.has(i))&&s!==this.lang_)if(this.lang_=s,h.LANGUAGE_CACHE.has(i)){const n=h.LANGUAGE_CACHE.get(i);for(const l in n)n.hasOwnProperty(l)&&(this[l]=n[l])}else{const n=h.baseUrl+h.languageFilename.replace("[LANG]",this.lang_.toLowerCase());try{yield this.fetchJson(n),this.cacheLang_=i,this.cacheLanguage()}catch(l){throw new k("unable to load language: "+l.message)}}})}get language(){return this.lang_}isVendorList(e){return e!==void 0&&e.vendors!==void 0}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&h.CACHE.set(h.LATEST_CACHE_KEY,this.getJson()),h.CACHE.has(this.vendorListVersion)||h.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(s=>{this.byPurposeVendorMap[s]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(s=>{this.bySpecialPurposeVendorMap[s]=new Set}),Object.keys(this.features).forEach(s=>{this.byFeatureVendorMap[s]=new Set}),Object.keys(this.specialFeatures).forEach(s=>{this.bySpecialFeatureVendorMap[s]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(s=>+s)),this.vendorIds=new Set(e),this.vendors_=e.reduce((s,i)=>{const n=this.vendors_[String(i)];return n&&n.deletedDate===void 0&&(n.purposes.forEach(l=>{this.byPurposeVendorMap[String(l)].consent.add(i)}),n.specialPurposes.forEach(l=>{this.bySpecialPurposeVendorMap[String(l)].add(i)}),n.legIntPurposes.forEach(l=>{this.byPurposeVendorMap[String(l)].legInt.add(i)}),n.flexiblePurposes&&n.flexiblePurposes.forEach(l=>{this.byPurposeVendorMap[String(l)].flexible.add(i)}),n.features.forEach(l=>{this.byFeatureVendorMap[String(l)].add(i)}),n.specialFeatures.forEach(l=>{this.bySpecialFeatureVendorMap[String(l)].add(i)}),s[i]=n),s},{})}getFilteredVendors(e,s,i,n){const l=e.charAt(0).toUpperCase()+e.slice(1);let d;const p={};return d=e==="purpose"&&i?this["by"+l+"VendorMap"][String(s)][i]:this["by"+(n?"Special":"")+l+"VendorMap"][String(s)],d.forEach(m=>{p[String(m)]=this.vendors[String(m)]}),p}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){const e=new h(this.getJson());return this.lang_!==h.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return typeof e=="object"&&typeof e.narrowVendorsTo=="function"}};r(h,"LANGUAGE_CACHE",new Map),r(h,"CACHE",new Map),r(h,"LATEST_CACHE_KEY",0),r(h,"DEFAULT_LANGUAGE","EN"),r(h,"consentLanguages",new Z),r(h,"baseUrl_"),r(h,"latestFilename","vendor-list.json"),r(h,"versionedFilename","archives/vendor-list-v[VERSION].json"),r(h,"languageFilename","purposes-[LANG].json");let y=h;class W extends ${constructor(e){super();r(this,"isServiceSpecific_",!1);r(this,"supportOOB_",!0);r(this,"useNonStandardTexts_",!1);r(this,"purposeOneTreatment_",!1);r(this,"publisherCountryCode_","AA");r(this,"version_",2);r(this,"consentScreen_",0);r(this,"policyVersion_",4);r(this,"consentLanguage_","EN");r(this,"cmpId_",0);r(this,"cmpVersion_",0);r(this,"vendorListVersion_",0);r(this,"numCustomPurposes_",0);r(this,"gvl_");r(this,"created");r(this,"lastUpdated");r(this,"specialFeatureOptins",new b);r(this,"purposeConsents",new b);r(this,"purposeLegitimateInterests",new b);r(this,"publisherConsents",new b);r(this,"publisherLegitimateInterests",new b);r(this,"publisherCustomConsents",new b);r(this,"publisherCustomLegitimateInterests",new b);r(this,"customPurposes");r(this,"vendorConsents",new b);r(this,"vendorLegitimateInterests",new b);r(this,"vendorsDisclosed",new b);r(this,"vendorsAllowed",new b);r(this,"publisherRestrictions",new Ne);e&&(this.gvl=e),this.updated()}set gvl(e){y.isInstanceOf(e)||(e=new y(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),!(Number.isInteger(e)&&e>1))throw new O("cmpId",e);this.cmpId_=e}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new O("cmpVersion",e);this.cmpVersion_=e}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new O("consentScreen",e);this.consentScreen_=e}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(!/^([A-z]){2}$/.test(e))throw new O("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if((e=Number(e)|0)<0)throw new O("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new O("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardTexts(e){this.useNonStandardTexts_=e}get useNonStandardTexts(){return this.useNonStandardTexts_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if(typeof this.customPurposes=="object"){const s=Object.keys(this.customPurposes).sort((i,n)=>Number(i)-Number(n));e=parseInt(s.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new O("numCustomPurposes",e)}updated(){const e=new Date,s=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=s,this.lastUpdated=s}}r(W,"consentLanguages",y.consentLanguages);class te{static encode(t,e){let s,i="";return t=De.process(t,e),s=Array.isArray(e==null?void 0:e.segments)?e.segments:new Qe(t,e)[""+t.version],s.forEach((n,l)=>{let d="";l<s.length-1&&(d="."),i+=ee.encode(t,n)+d}),i}static decode(t,e){const s=t.split("."),i=s.length;e||(e=new W);for(let n=0;n<i;n++){const l=s[n],d=D.decode(l.charAt(0)).substr(0,c.segmentType),p=Q.ID_TO_KEY[g.decode(d,c.segmentType).toString()];ee.decode(l,e,p)}return e}}(function(a){a.PING="ping",a.GET_TC_DATA="getTCData",a.GET_IN_APP_TC_DATA="getInAppTCData",a.GET_VENDOR_LIST="getVendorList",a.ADD_EVENT_LISTENER="addEventListener",a.REMOVE_EVENT_LISTENER="removeEventListener"})(S||(S={})),function(a){a.STUB="stub",a.LOADING="loading",a.LOADED="loaded",a.ERROR="error"}(U||(U={})),function(a){a.VISIBLE="visible",a.HIDDEN="hidden",a.DISABLED="disabled"}(x||(x={})),function(a){a.TC_LOADED="tcloaded",a.CMP_UI_SHOWN="cmpuishown",a.USER_ACTION_COMPLETE="useractioncomplete"}(H||(H={}));class z{constructor(t,e,s,i){r(this,"listenerId");r(this,"callback");r(this,"next");r(this,"param");r(this,"success",!0);Object.assign(this,{callback:t,listenerId:s,param:e,next:i});try{this.respond()}catch(n){this.invokeCallback(null)}}invokeCallback(t){const e=t!==null;typeof this.next=="function"?this.callback(this.next,t,e):this.callback(t,e)}}class B extends z{respond(){this.throwIfParamInvalid(),this.invokeCallback(new Me(this.param,this.listenerId))}throwIfParamInvalid(){if(!(this.param===void 0||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}}class ze{constructor(){r(this,"eventQueue",new Map);r(this,"queueNumber",0)}add(t){return this.eventQueue.set(this.queueNumber,t),this.queueNumber++}remove(t){return this.eventQueue.delete(t)}exec(){this.eventQueue.forEach((t,e)=>{new B(t.callback,t.param,e,t.next)})}clear(){this.queueNumber=0,this.eventQueue.clear()}get size(){return this.eventQueue.size}}class u{static reset(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=U.LOADING,this.disabled=!1,this.displayStatus=x.HIDDEN,this.eventQueue.clear()}}r(u,"apiVersion","2"),r(u,"tcfPolicyVersion"),r(u,"eventQueue",new ze),r(u,"cmpStatus",U.LOADING),r(u,"disabled",!1),r(u,"displayStatus",x.HIDDEN),r(u,"cmpId"),r(u,"cmpVersion"),r(u,"eventStatus"),r(u,"gdprApplies"),r(u,"tcModel"),r(u,"tcString");class se{constructor(){r(this,"cmpId",u.cmpId);r(this,"cmpVersion",u.cmpVersion);r(this,"gdprApplies",u.gdprApplies);r(this,"tcfPolicyVersion",u.tcfPolicyVersion)}}class Be extends se{constructor(){super(...arguments);r(this,"cmpStatus",U.ERROR)}}class Me extends se{constructor(e,s){super();r(this,"tcString");r(this,"listenerId");r(this,"eventStatus");r(this,"cmpStatus");r(this,"isServiceSpecific");r(this,"useNonStandardTexts");r(this,"publisherCC");r(this,"purposeOneTreatment");r(this,"outOfBand");r(this,"purpose");r(this,"vendor");r(this,"specialFeatureOptins");r(this,"publisher");if(this.eventStatus=u.eventStatus,this.cmpStatus=u.cmpStatus,this.listenerId=s,u.gdprApplies){const i=u.tcModel;this.tcString=u.tcString,this.isServiceSpecific=i.isServiceSpecific,this.useNonStandardTexts=i.useNonStandardTexts,this.purposeOneTreatment=i.purposeOneTreatment,this.publisherCC=i.publisherCountryCode,this.outOfBand={allowedVendors:this.createVectorField(i.vendorsAllowed,e),disclosedVendors:this.createVectorField(i.vendorsDisclosed,e)},this.purpose={consents:this.createVectorField(i.purposeConsents),legitimateInterests:this.createVectorField(i.purposeLegitimateInterests)},this.vendor={consents:this.createVectorField(i.vendorConsents,e),legitimateInterests:this.createVectorField(i.vendorLegitimateInterests,e)},this.specialFeatureOptins=this.createVectorField(i.specialFeatureOptins),this.publisher={consents:this.createVectorField(i.publisherConsents),legitimateInterests:this.createVectorField(i.publisherLegitimateInterests),customPurpose:{consents:this.createVectorField(i.publisherCustomConsents),legitimateInterests:this.createVectorField(i.publisherCustomLegitimateInterests)},restrictions:this.createRestrictions(i.publisherRestrictions)}}}createRestrictions(e){const s={};if(e.numRestrictions>0){const i=e.getMaxVendorId();for(let n=1;n<=i;n++){const l=n.toString();e.getRestrictions(n).forEach(d=>{const p=d.purposeId.toString();s[p]||(s[p]={}),s[p][l]=d.restrictionType})}}return s}createVectorField(e,s){return s?s.reduce((i,n)=>(i[String(n)]=e.has(Number(n)),i),{}):[...e].reduce((i,n)=>(i[n[0].toString(10)]=n[1],i),{})}}class Je extends Me{constructor(t){super(t),delete this.outOfBand}createVectorField(t){return[...t].reduce((e,s)=>e+=s[1]?"1":"0","")}createRestrictions(t){const e={};if(t.numRestrictions>0){const s=t.getMaxVendorId();t.getRestrictions().forEach(i=>{e[i.purposeId.toString()]="_".repeat(s)});for(let i=0;i<s;i++){const n=i+1;t.getRestrictions(n).forEach(l=>{const d=l.restrictionType.toString(),p=l.purposeId.toString(),m=e[p].substr(0,i),f=e[p].substr(i+1);e[p]=m+d+f})}}return e}}class Ke extends se{constructor(){super();r(this,"cmpLoaded",!0);r(this,"cmpStatus",u.cmpStatus);r(this,"displayStatus",u.displayStatus);r(this,"apiVersion",String(u.apiVersion));r(this,"gvlVersion");u.tcModel&&u.tcModel.vendorListVersion&&(this.gvlVersion=+u.tcModel.vendorListVersion)}}class Ye extends z{respond(){this.invokeCallback(new Ke)}}class qe extends B{respond(){this.throwIfParamInvalid(),this.invokeCallback(new Je(this.param))}}class Xe extends z{respond(){const t=u.tcModel,e=t.vendorListVersion;let s;this.param===void 0&&(this.param=e),s=this.param===e&&t.gvl?t.gvl:new y(this.param),s.readyPromise.then(()=>{this.invokeCallback(s.getJson())})}}class Ze extends B{respond(){this.listenerId=u.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),super.respond()}}class et extends z{respond(){this.invokeCallback(u.eventQueue.remove(this.param))}}var Le,Ve,Te,Oe,Pe,Re;Re=S.PING,Pe=S.GET_TC_DATA,Oe=S.GET_IN_APP_TC_DATA,Te=S.GET_VENDOR_LIST,Ve=S.ADD_EVENT_LISTENER,Le=S.REMOVE_EVENT_LISTENER;class A{}r(A,Re,Ye),r(A,Pe,B),r(A,Oe,qe),r(A,Te,Xe),r(A,Ve,Ze),r(A,Le,et);class xe{static has(t){return typeof t=="string"&&(t=Number(t)),this.set_.has(t)}}r(xe,"set_",new Set([0,2,void 0,null]));const X="__tcfapi";class tt{constructor(t){r(this,"callQueue");r(this,"customCommands");if(t){let e=S.ADD_EVENT_LISTENER;if(t!=null&&t[e])throw new Error(`Built-In Custom Commmand for ${e} not allowed: Use ${S.GET_TC_DATA} instead`);if(e=S.REMOVE_EVENT_LISTENER,t==null?void 0:t[e])throw new Error(`Built-In Custom Commmand for ${e} not allowed`);t!=null&&t[S.GET_TC_DATA]&&(t[S.ADD_EVENT_LISTENER]=t[S.GET_TC_DATA],t[S.REMOVE_EVENT_LISTENER]=t[S.GET_TC_DATA]),this.customCommands=t}try{this.callQueue=window[X]()||[]}catch(e){this.callQueue=[]}finally{window[X]=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(t,e,s,...i){if(typeof t!="string")s(null,!1);else if(xe.has(e)){if(typeof s!="function")throw new Error("invalid callback function");u.disabled?s(new Be,!1):this.isCustomCommand(t)||this.isBuiltInCommand(t)?this.isCustomCommand(t)&&!this.isBuiltInCommand(t)?this.customCommands[t](s,...i):t===S.PING?this.isCustomCommand(t)?new A[t](this.customCommands[t],i[0],null,s):new A[t](s,i[0]):u.tcModel===void 0?this.callQueue.push([t,e,s,...i]):this.isCustomCommand(t)&&this.isBuiltInCommand(t)?new A[t](this.customCommands[t],i[0],null,s):new A[t](s,i[0]):s(null,!1)}else s(null,!1)}purgeQueuedCalls(){const t=this.callQueue;this.callQueue=[],t.forEach(e=>{window[X](...e)})}isCustomCommand(t){return this.customCommands&&typeof this.customCommands[t]=="function"}isBuiltInCommand(t){return A[t]!==void 0}}class st{constructor(t,e,s=!1,i){r(this,"callResponder");r(this,"isServiceSpecific");r(this,"numUpdates",0);this.throwIfInvalidInt(t,"cmpId",2),this.throwIfInvalidInt(e,"cmpVersion",0),u.cmpId=t,u.cmpVersion=e,u.tcfPolicyVersion=4,this.isServiceSpecific=!!s,this.callResponder=new tt(i)}throwIfInvalidInt(t,e,s){if(!(typeof t=="number"&&Number.isInteger(t)&&t>=s))throw new Error(`Invalid ${e}: ${t}`)}update(t,e=!1){if(u.disabled)throw new Error("CmpApi Disabled");u.cmpStatus=U.LOADED,e?(u.displayStatus=x.VISIBLE,u.eventStatus=H.CMP_UI_SHOWN):u.tcModel===void 0?(u.displayStatus=x.DISABLED,u.eventStatus=H.TC_LOADED):(u.displayStatus=x.HIDDEN,u.eventStatus=H.USER_ACTION_COMPLETE),u.gdprApplies=t!==null,u.gdprApplies?(t===""?(u.tcModel=new W,u.tcModel.cmpId=u.cmpId,u.tcModel.cmpVersion=u.cmpVersion):u.tcModel=te.decode(t),u.tcModel.isServiceSpecific=this.isServiceSpecific,u.tcfPolicyVersion=Number(u.tcModel.policyVersion),u.tcString=t):u.tcModel=null,this.numUpdates===0?this.callResponder.purgeQueuedCalls():u.eventQueue.exec(),this.numUpdates++}disable(){u.disabled=!0,u.cmpStatus=U.ERROR}}class ce{constructor(t){this.consentIds=[],this.disclosedIds=[],this.cookieName=t,this.init()}init(){var s;let t=this._get().split("~dv.");this.disclosedIds=((s=t[1])==null?void 0:s.length)>0?t[1].split(".").map(i=>+i):[];let e=t[0].split("~");this.consentIds=e[1].length>0?e[1].split(".").map(i=>+i):[]}disclose(t){this.consentIds.indexOf(t)==-1&&this.disclosedIds.indexOf(t)==-1&&(this.disclosedIds.push(t),this.disclosedIds.sort())}set(t){this.consentIds.indexOf(t)==-1&&(this.consentIds.push(t),this.consentIds.sort()),this.disclosedIds.indexOf(t)!=-1&&this.disclosedIds.splice(this.disclosedIds.indexOf(t),1),this._set()}setAll(){this.consentIds=this.consentIds.concat(this.disclosedIds),this.consentIds.sort(),this.disclosedIds=[],this._set()}unset(t){this.consentIds.indexOf(t)!=-1&&this.consentIds.splice(this.consentIds.indexOf(t),1),this.disclosedIds.indexOf(t)==-1&&(this.disclosedIds.push(t),this.disclosedIds.sort()),this._set()}unsetAll(){this.disclosedIds=this.disclosedIds.concat(this.consentIds),this.disclosedIds.sort(),this.consentIds=[],this._set()}isConsent(t){return this.consentIds.indexOf(t)!=-1}has(t){return this.consentIds.indexOf(t)!=-1}get(){return this._get()}save(){this._set()}_get(){return this.__getFromCookie(this.cookieName)||this._make()}_make(){return"2~"+this.consentIds.join(".")+"~dv."+this.disclosedIds.join(".")}_set(){this.__saveToCookie(this.cookieName,this._make(),525600)}_isEmpty(){return this.consentIds.length==0&&this.disclosedIds.length==0}__saveToStorage(t,e,s){sessionStorage.setItem(t,e)}__getFromStorage(t){return sessionStorage.getItem(t)}__saveToCookie(t,e,s){var i;if(s){var n=new Date;n.setTime(n.getTime()+60*s*1e3),i="; expires="+n.toUTCString()}else i="";document.cookie=t+"="+e+i+"; path=/"}__getFromCookie(t){var e=document.cookie.match(RegExp("(?:^|;\\s*)"+(t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")+"=([^;]*)")));return e?e[1]:null}}var T;(T=window).__cmpBundle=new class{constructor(t){this.cmpId=t.cmpId,this.config=I({},t),this.cookieName=t.cookieName||"iab",this.init()}init(){if(y.baseUrl=location.protocol+"//"+location.host+this.config.baseUrl||"/js/",this.ac=new ce("ac"),this.owned=new ce("oac"),this.tcString=this.__getTC(this.cookieName)||"",this.cmpApi=new st(this.cmpId,3,!0,{getTCData:(t,e,s)=>{typeof e!="boolean"&&(e.addtlConsent=this.ac.get(),e.enableAdvertiserConsentMode=!0,e.ownConsent=this.owned.get(),e.gdprApplies=this.config.gdprApplies),t(e,s)}}),this.tcString!="")return this.tcModel=te.decode(this.tcString),this.tcModel.addtlConsent||(this.tcModel.addtlConsent=this.ac.get()),void this.cmpApi.update(this.tcString);this.tcModel=new W(new y),this.tcModel.cmpId=this.config.cmpId,this.tcModel.consentScreen=1,this.tcModel.consentLanguage=this.config.lang||"en",this.tcModel.vendorListVersion=1,this.tcModel.purposeOneTreatment=!1,this.tcModel.policyVersion=2,this.tcModel.isServiceSpecific=!0,this.tcModel.publisherCountryCode="ES",this.tcString!=""?this.updateConsent():this.tcModel.gvl.readyPromise.then(()=>{this.__initOwn(),this.__initPartners().then(()=>{this._setTc()}),this.tcModel.setAllPurposeLegitimateInterests(),this.tcModel.setAllVendorLegitimateInterests()})}initGvl(){return V(this,null,function*(){this.tcModel.gvl||(this.tcModel.gvl=new y),yield this.tcModel.gvl.readyPromise,this.__initOwn(),yield this.__initPartners(),this._setTc(),this.tcModel.setAllPurposeLegitimateInterests(),this.tcModel.setAllVendorLegitimateInterests()})}initAll(){this.tcString==""&&(this.tcModel.setAllVendorConsents(),this.tcModel.gvl.readyPromise.then(()=>{this.tcModel.gvl.getVendorsWithLegIntPurpose(2),this.tcModel.setAllVendorConsents()}))}getTcData(t){if(this.tcModel)return this.tcModel;T.__tcfapi("getTCData",2,t)}acceptAll(){if(!this.tcModel.gvl)return this.tcModel.gvl=new y,void this.tcModel.gvl.readyPromise.then(()=>{this.acceptAll()});this.tcModel.setAllPurposeConsents(),this.tcModel.setAllPurposeLegitimateInterests(),this.tcModel.setAllVendorConsents(),this.tcModel.setAllVendorLegitimateInterests(),this.tcModel.setAllSpecialFeatureOptins(),this.ac._isEmpty()?this.__initPartners().then(()=>{this.ac.setAll()}):this.ac.setAll(),this.owned.setAll(),this.updateConsent()}rejectAll(){this.tcModel.unsetAllPurposeConsents(),this.tcModel.unsetAllPurposeLegitimateInterests(),this.tcModel.unsetAllVendorConsents(),this.tcModel.unsetAllVendorLegitimateInterests(),this.tcModel.unsetAllSpecialFeatureOptins(),this.ac.unsetAll(),this.owned.unsetAll(),this.updateConsent()}_setTc(){const t=te.encode(this.tcModel);this.cmpApi.update(t||null),this.tcString=t}updateConsent(){this.tcModel.addtlConsent=this.ac.get(),this._setTc(),this.__saveTC(this.config.cookieName||"iab",this.tcString)}loadPurposes(t){return V(this,null,function*(){if((t=t||this.config.lang||"en")=="en")return this.tcModel.gvl.purposes;if(this.purposesLoaded)return this.purposesLoaded.purposes;const e=`${this.config.baseUrl||"/js/"}/purposes/purposes-${t}.json?v=${this.tcModel.gvl.vendorListVersion}`;try{const s=yield fetch(e);this.purposesLoaded=yield s.json(),Object.assign(this.tcModel.gvl,this.purposesLoaded)}catch(s){return this.purposesLoaded=this.tcModel.gvl,this.tcModel.gvl.purposes}return this.purposesLoaded.purposes})}getSelectedPurposes(){return this.tcModel.purposeConsents.forEach(t=>{}),[]}loadAll(){return V(this,null,function*(){const t=yield this.__loadPartners();this.tcModel.gvl||(this.tcModel.gvl=new y);const e=yield this.tcModel.gvl.readyPromise;return Promise.all([t,e])})}__loadVendors(){return V(this,null,function*(){return this.tcModel.gvl||(this.tcModel.gvl=new y),yield this.tcModel.gvl.readyPromise})}__loadPartners(){return V(this,null,function*(){if(this.partners)return this.partners;const t=yield fetch(`${this.config.baseUrl}/partners.json`);return this.partners=yield t.json(),this.partners})}__initPartners(){return V(this,null,function*(){(yield this.__loadPartners()).forEach(t=>{this.ac.has(t.provider_id)||this.ac.disclose(t.provider_id)})})}__initOwn(){var t,e;(t=this.config.ownLegitimateInterests)==null||t.forEach(s=>{this.owned.has(s.id)||this.owned.disclose(s.id)}),(e=this.config.ownConsents)==null||e.forEach(s=>{this.owned.has(s.id)||this.owned.disclose(s.id)})}__saveTC(t,e){this.__saveToCookie(t,e,525600)}__getTC(t){return this.__getFromCookie(t)}__saveToStorage(t,e,s){T.sessionStorage?T.sessionStorage.setItem(t,e):this.__saveToCookie(t,e,s)}__getFromStorage(t){return T.sessionStorage?T.sessionStorage.getItem(t):this.__getFromCookie(t)}__saveToCookie(t,e,s){var i;if(s){var n=new Date;n.setTime(n.getTime()+60*s*1e3),i="; expires="+n.toUTCString()}else i="";this.__saveToVar(t,e),document.cookie=t+"="+e+i+"; path=/"}__getFromCookie(t){if(this.__getFromVar(t))return this.__getFromVar(t);var e=document.cookie.match(RegExp("(?:^|;\\s*)"+t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")+"=([^;]*)"));return e?e[1]:null}__saveToVar(t,e){T["cX"+t]=e}__getFromVar(t){return T["cX"+t]}}(T.cmpConfig);
